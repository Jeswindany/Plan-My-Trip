<% layout('layouts/boilerplate') %>

<div class="row">
	<h1 class="text-center">Edit Hotspot</h1>
	<div class="col-md-6 offset-md-3">
		<form action="/hotspots/<%= hotspot._id %>?_method=PUT" method="POST" novalidate class="needs-validation" enctype="multipart/form-data">
			<div class="mb-3">
				<label class="form-label" for="title">Title</label>
				<input class="form-control" type="text" name="hotspot[title]" id="title" value="<%= hotspot.title %>" required />
				<div class="valid-feedback">
					Looks good!
				</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="location">Location</label>
				<input class="form-control" type="text" name="hotspot[location]" id="location" value="<%= hotspot.location %>" required />
				<div class="valid-feedback">
					Looks good!
				</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="price">Pricing</label>
				<select class="form-select" id="price" name="hotspot[price]" aria-label="Price select" required>
					<option value="free" <%=hotspot.price==="free" ? "selected" : "" %>>Free</option>
					<option value="cheap" <%=hotspot.price==="cheap" ? "selected" : "" %>>Cheap</option>
					<option value="moderate" <%=hotspot.price==="moderate" ? "selected" : "" %>>Moderate</option>
					<option value="expensive" <%=hotspot.price==="expensive" ? "selected" : "" %>>Expensive</option>
				</select>
				<div class="valid-feedback">
					Looks good!
				</div>
			</div>
			<div class="mb-3">
				<label class="form-label" for="description">Description</label>
				<textarea class="form-control" name="hotspot[description]" id="description" required><%= hotspot.description %></textarea>
				<div class="valid-feedback">
					Looks good!
				</div>
			</div>
			<div class="mb-3">
				<label for="image" class="form-label">Add Images</label>
				<input class="form-control" type="file" name="image" id="image" multiple>
			</div>
			<div class="mb-3">
				<% hotspot.images.forEach(function(img, i) { %>
				<img src="<%= img.thumbnail %>" class="img-thumbnail" alt="">
				<div class="form-check-inline">
					<input type="checkbox" id="image-<%= i %>" name="deleteImages[]" value="<%= img.filename %>">
				</div>
				<label for="image-<%= i %>">Delete?</label>
				<% }) %>
			</div>
			<div class="mb-3">
				<button class="btn btn-info text-white">Update Hotspot</button>
			</div>
		</form>
		<a href="/hotspots/<%= hotspot._id %>">Back to Hotspot</a>
	</div>
</div>